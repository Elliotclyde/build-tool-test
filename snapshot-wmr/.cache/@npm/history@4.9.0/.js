import t from"/@npm/@babel/runtime/helpers/esm/extends";import e from"/@npm/resolve-pathname";import n from"/@npm/value-equal";import a from"/@npm/tiny-warning";import o from"/@npm/tiny-invariant";var i={NODE_ENV:"development"};function addLeadingSlash(t){return"/"===t.charAt(0)?t:"/"+t}function stripLeadingSlash(t){return"/"===t.charAt(0)?t.substr(1):t}function hasBasename(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function stripBasename(t,e){return hasBasename(t,e)?t.substr(e.length):t}function stripTrailingSlash(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function parsePath(t){var e=t||"/",n="",a="",o=e.indexOf("#");-1!==o&&(a=e.substr(o),e=e.substr(0,o));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===a?"":a}}function createPath(t){var e=t.pathname,n=t.search,a=t.hash,o=e||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(o+="#"===a.charAt(0)?a:"#"+a),o}function createLocation(n,a,o,i){var r;"string"==typeof n?(r=parsePath(n)).state=a:(void 0===(r=t({},n)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==a&&void 0===r.state&&(r.state=a));try{r.pathname=decodeURI(r.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return o&&(r.key=o),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=e(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function locationsAreEqual(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&n(t.state,e.state)}function createTransitionManager(){var t=null;var e=[];return{setPrompt:function(e){return a(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,o,i){if(null!=t){var r="function"==typeof t?t(e,n):t;"string"==typeof r?"function"==typeof o?o(r,i):(a(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==r)}else i(!0)},appendListener:function(t){var n=!0;function listener(){n&&t.apply(void 0,arguments)}return e.push(listener),function(){n=!1,e=e.filter((function(t){return t!==listener}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.forEach((function(t){return t.apply(void 0,n)}))}}}var r=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(t,e){e(window.confirm(t))}function getHistoryState(){try{return window.history.state||{}}catch(t){return{}}}function createBrowserHistory(e){void 0===e&&(e={}),r||("production"!==i.NODE_ENV?o(!1,"Browser history needs a DOM"):o(!1));var n,s=window.history,c=(-1===(n=window.navigator.userAgent).indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,h=!(-1===window.navigator.userAgent.indexOf("Trident")),d=e,u=d.forceRefresh,l=void 0!==u&&u,f=d.getUserConfirmation,p=void 0===f?getConfirmation:f,g=d.keyLength,v=void 0===g?6:g,m=e.basename?stripTrailingSlash(addLeadingSlash(e.basename)):"";function getDOMLocation(t){var e=t||{},n=e.key,o=e.state,i=window.location,r=i.pathname+i.search+i.hash;return a(!m||hasBasename(r,m),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+r+'" to begin with "'+m+'".'),m&&(r=stripBasename(r,m)),createLocation(r,o,n)}function createKey(){return Math.random().toString(36).substr(2,v)}var w=createTransitionManager();function setState(e){t(S,e),S.length=s.length,w.notifyListeners(S.location,S.action)}function handlePopState(t){(function(t){void 0===t.state&&navigator.userAgent.indexOf("CriOS")})(t)||handlePop(getDOMLocation(t.state))}function handleHashChange(){handlePop(getDOMLocation(getHistoryState()))}var y=!1;function handlePop(t){if(y)y=!1,setState();else{w.confirmTransitionTo(t,"POP",p,(function(e){e?setState({action:"POP",location:t}):function(t){var e=S.location,n=L.indexOf(e.key);-1===n&&(n=0);var a=L.indexOf(t.key);-1===a&&(a=0);var o=n-a;o&&(y=!0,go(o))}(t)}))}}var P=getDOMLocation(getHistoryState()),L=[P.key];function createHref(t){return m+createPath(t)}function go(t){s.go(t)}var O=0;function checkDOMListeners(t){1===(O+=t)&&1===t?(window.addEventListener("popstate",handlePopState),h&&window.addEventListener("hashchange",handleHashChange)):0===O&&(window.removeEventListener("popstate",handlePopState),h&&window.removeEventListener("hashchange",handleHashChange))}var H=!1;var S={length:s.length,action:"POP",location:P,createHref,push:function(t,e){a(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var n=createLocation(t,e,createKey(),S.location);w.confirmTransitionTo(n,"PUSH",p,(function(t){if(t){var e=createHref(n),o=n.key,i=n.state;if(c)if(s.pushState({key:o,state:i},null,e),l)window.location.href=e;else{var r=L.indexOf(S.location.key),h=L.slice(0,-1===r?0:r+1);h.push(n.key),L=h,setState({action:"PUSH",location:n})}else a(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}}))},replace:function(t,e){a(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var n=createLocation(t,e,createKey(),S.location);w.confirmTransitionTo(n,"REPLACE",p,(function(t){if(t){var e=createHref(n),o=n.key,i=n.state;if(c)if(s.replaceState({key:o,state:i},null,e),l)window.location.replace(e);else{var r=L.indexOf(S.location.key);-1!==r&&(L[r]=n.key),setState({action:"REPLACE",location:n})}else a(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}}))},go,goBack:function(){go(-1)},goForward:function(){go(1)},block:function(t){void 0===t&&(t=!1);var e=w.setPrompt(t);return H||(checkDOMListeners(1),H=!0),function(){return H&&(H=!1,checkDOMListeners(-1)),e()}},listen:function(t){var e=w.appendListener(t);return checkDOMListeners(1),function(){checkDOMListeners(-1),e()}}};return S}var s={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+stripLeadingSlash(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function getHashPath(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function replaceHashPath(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)}function createHashHistory(e){void 0===e&&(e={}),r||("production"!==i.NODE_ENV?o(!1,"Hash history needs a DOM"):o(!1));var n=window.history,c=-1===window.navigator.userAgent.indexOf("Firefox"),h=e,d=h.getUserConfirmation,u=void 0===d?getConfirmation:d,l=h.hashType,f=void 0===l?"slash":l,p=e.basename?stripTrailingSlash(addLeadingSlash(e.basename)):"",g=s[f],v=g.encodePath,m=g.decodePath;function getDOMLocation(){var t=m(getHashPath());return a(!p||hasBasename(t,p),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+p+'".'),p&&(t=stripBasename(t,p)),createLocation(t)}var w=createTransitionManager();function setState(e){t(x,e),x.length=n.length,w.notifyListeners(x.location,x.action)}var y=!1,P=null;function handleHashChange(){var t=getHashPath(),e=v(t);if(t!==e)replaceHashPath(e);else{var n=getDOMLocation(),a=x.location;if(!y&&locationsAreEqual(a,n))return;if(P===createPath(n))return;P=null,function(t){if(y)y=!1,setState();else{w.confirmTransitionTo(t,"POP",u,(function(e){e?setState({action:"POP",location:t}):function(t){var e=x.location,n=S.lastIndexOf(createPath(e));-1===n&&(n=0);var a=S.lastIndexOf(createPath(t));-1===a&&(a=0);var o=n-a;o&&(y=!0,go(o))}(t)}))}}(n)}}var L=getHashPath(),O=v(L);L!==O&&replaceHashPath(O);var H=getDOMLocation(),S=[createPath(H)];function go(t){a(c,"Hash history go(n) causes a full page reload in this browser"),n.go(t)}var b=0;function checkDOMListeners(t){1===(b+=t)&&1===t?window.addEventListener("hashchange",handleHashChange):0===b&&window.removeEventListener("hashchange",handleHashChange)}var k=!1;var x={length:n.length,action:"POP",location:H,createHref:function(t){return"#"+v(p+createPath(t))},push:function(t,e){a(void 0===e,"Hash history cannot push state; it is ignored");var n=createLocation(t,void 0,void 0,x.location);w.confirmTransitionTo(n,"PUSH",u,(function(t){if(t){var e=createPath(n),o=v(p+e);if(getHashPath()!==o){P=e,function(t){window.location.hash=t}(o);var i=S.lastIndexOf(createPath(x.location)),r=S.slice(0,-1===i?0:i+1);r.push(e),S=r,setState({action:"PUSH",location:n})}else a(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),setState()}}))},replace:function(t,e){a(void 0===e,"Hash history cannot replace state; it is ignored");var n=createLocation(t,void 0,void 0,x.location);w.confirmTransitionTo(n,"REPLACE",u,(function(t){if(t){var e=createPath(n),a=v(p+e);getHashPath()!==a&&(P=e,replaceHashPath(a));var o=S.indexOf(createPath(x.location));-1!==o&&(S[o]=e),setState({action:"REPLACE",location:n})}}))},go,goBack:function(){go(-1)},goForward:function(){go(1)},block:function(t){void 0===t&&(t=!1);var e=w.setPrompt(t);return k||(checkDOMListeners(1),k=!0),function(){return k&&(k=!1,checkDOMListeners(-1)),e()}},listen:function(t){var e=w.appendListener(t);return checkDOMListeners(1),function(){checkDOMListeners(-1),e()}}};return x}function clamp(t,e,n){return Math.min(Math.max(t,e),n)}function createMemoryHistory(e){void 0===e&&(e={});var n=e,o=n.getUserConfirmation,i=n.initialEntries,r=void 0===i?["/"]:i,s=n.initialIndex,c=void 0===s?0:s,h=n.keyLength,d=void 0===h?6:h,u=createTransitionManager();function setState(e){t(g,e),g.length=g.entries.length,u.notifyListeners(g.location,g.action)}function createKey(){return Math.random().toString(36).substr(2,d)}var l=clamp(c,0,r.length-1),f=r.map((function(t){return createLocation(t,void 0,"string"==typeof t?createKey():t.key||createKey())})),p=createPath;function go(t){var e=clamp(g.index+t,0,g.entries.length-1),n=g.entries[e];u.confirmTransitionTo(n,"POP",o,(function(t){t?setState({action:"POP",location:n,index:e}):setState()}))}var g={length:f.length,action:"POP",location:f[l],index:l,entries:f,createHref:p,push:function(t,e){a(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var n=createLocation(t,e,createKey(),g.location);u.confirmTransitionTo(n,"PUSH",o,(function(t){if(t){var e=g.index+1,a=g.entries.slice(0);a.length>e?a.splice(e,a.length-e,n):a.push(n),setState({action:"PUSH",location:n,index:e,entries:a})}}))},replace:function(t,e){a(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var n=createLocation(t,e,createKey(),g.location);u.confirmTransitionTo(n,"REPLACE",o,(function(t){t&&(g.entries[g.index]=n,setState({action:"REPLACE",location:n}))}))},go,goBack:function(){go(-1)},goForward:function(){go(1)},canGo:function(t){var e=g.index+t;return e>=0&&e<g.entries.length},block:function(t){return void 0===t&&(t=!1),u.setPrompt(t)},listen:function(t){return u.appendListener(t)}};return g}export{createBrowserHistory,createHashHistory,createLocation,createMemoryHistory,createPath,locationsAreEqual,parsePath};