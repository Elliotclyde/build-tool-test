import{options as e,Component as t}from"/@npm/preact";const _=e.__e;e.__e=(e,t)=>{t.__c&&t.__c.__d&&(t.__c.__d=!1),_&&_(e,t)};const o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout;e.debounceRendering=e=>{o(()=>{try{e()}catch(t){throw e.__r=0,t}})};const c=new WeakMap,n=new WeakMap,getMappedVnode=e=>n.has(e)?getMappedVnode(n.get(e)):e,s=e.vnode;e.vnode=e=>{if(e&&"function"==typeof e.type){const t=c.get(e.type);t?t.push(e):c.set(e.type,[e]);const _=getMappedVnode(e.type);e.type=_,e.__c&&(e.__c.constructor=_)}s&&s(e)};const f=e.unmount;e.unmount=e=>{const t=(e||{}).type;if("function"==typeof t&&c.has(t)){const _=c.get(t);if(_){const t=_.indexOf(e);-1!==t&&_.splice(t,1)}}f&&f(e)};const r=new WeakMap,computeKey=e=>{let t,_=e.key;try{t=e.getCustomHooks()}catch(o){return e.forceReset=!0,_}for(let c=0;c<t.length;c++){const o=t[c];if("function"!=typeof o)return e.forceReset=!0,_;const n=r.get(o);if(void 0===n)continue;const s=computeKey(n);n.forceReset&&(e.forceReset=!0),_+="\n---\n"+s}return _};let i=new Map,p=[];self.__PREFRESH__={getSignature:e=>r.get(e),register:(e,t)=>{if("function"==typeof e){if(i.has(t)){const _=i.get(t);_!==e&&(p.push([_,e]),i.set(t,e))}else i.set(t,e);r.has(e)||r.set(e,{getCustomHooks:()=>[],type:e})}},getPendingUpdates:()=>p,flush:()=>{p=[]},replaceComponent:function(e,_,o){const s=c.get(e);s&&(c.delete(e),c.set(_,s),n.set(e,_),p=p.filter(t=>t[0]!==e),s.forEach(c=>{if(c.type=_,c.__c){c.__c.constructor=c.type;try{if(c.__c instanceof e){const e=c.__c,t=new _(c.__c.props,c.__c.context);c.__c=t;for(let _ in e){const o=typeof e[_];_ in t?"function"!==o&&typeof t[_]===o&&("object"===o&&null!=t[_]&&t[_].constructor===e[_].constructor?Object.assign(t[_],e[_]):t[_]=e[_]):t[_]=e[_]}}}catch(n){c.__c.constructor=_}o?(c.__c.__H&&c.__c.__H.__&&c.__c.__H.__.length&&c.__c.__H.__.forEach(e=>{if(e.__c&&"function"==typeof e.__c)e.__c();else if(e.__H&&e.__&&3===Object.keys(e).length){const t=Object.keys(e).find(e=>"__H"!==e&&"__"!==e);t&&"function"==typeof e[t]&&e[t]()}}),c.__c.__H={__:[],__h:[]}):c.__c.__H&&c.__c.__H.__&&c.__c.__H.__.length&&(c.__c.__H.__.forEach(e=>{if(e.__c&&"function"==typeof e.__c)e.__c();else if(e.__H&&e.__&&3===Object.keys(e).length){const t=Object.keys(e).find(e=>"__H"!==e&&"__"!==e);t&&"function"==typeof e[t]&&e[t]()}}),c.__c.__H.__.forEach(e=>{e.__H&&Array.isArray(e.__H)&&(e.__H=void 0)})),(c.__e&&!document.contains(c.__e)||!c.__e&&!c.__k)&&location.reload(),t.prototype.forceUpdate.call(c.__c)}}))},sign:function(e,t,_,o,c){if(e){let n=r.get(e);if("begin"===c)return r.set(e,{type:e,key:t,forceReset:_,getCustomHooks:o||(()=>[])}),"needsHooks";"needsHooks"===c&&(n.fullKey=computeKey(n))}},computeKey};